async function initExperienceTools() {

  await waitForElement('.character-data-column .subtext-stats');

  $('.character-list > li').click(function() {
    $('#after-claim').remove();
  });

  while (true) {
    await waitForElement('.character-data-column .subtext-stats');

    if (isPossibleLevelChanged()) {
      showPossibleLevel();
    }

    await sleep(1500);
    continue;
  }

}

let lastPossibleLevel = ['', 0]; // hero, xp rewards

function isPossibleLevelChanged() {
  const hero = getHero();
  const rewards = getExpRewards();

  let heroReward = rewards.find(e => e[0].trim() === hero.name);

  if (!heroReward) throw new Error('HeroReward not exists. It\'s bad =)');

  if (lastPossibleLevel[0] !== hero.name || lastPossibleLevel[1] !== Number(heroReward[1])) return true;

  return false;
}


function showPossibleLevel() {
  const hero = getHero();
  const rewards = getExpRewards();

  let heroReward = rewards.find(e => e[0].trim() === hero.name);

  if (!heroReward) throw new Error('HeroReward not exists. It\'s bad =)');

  heroReward = Number(heroReward[1]);

  lastPossibleLevel = [hero.name, heroReward];

  let i = hero.exp.level - 1;

  heroReward += hero.exp.xp;

  while (true) {
    if (heroReward < EXP_TABLE[i][1]) break;

    heroReward -= EXP_TABLE[i][1];
    i++;
  }

  if ( !$('#after-claim').length ) {
    $('.character-data-column').first().append('<span id="after-claim"></span>')
  }

  $('#after-claim').text(`After claim: Level ${EXP_TABLE[i][0]}`);

}

function getExpRewards() {
  return $('.navbar.navbar-light.navbar-expand .gtag-link-others').last().text().replace('XP', '').split(',').map(e => {
    const hero = e.trim().split(' ');

    return [hero.splice(0, 2).join(' '), hero[0]];
  });
}

const EXP_TABLE = [
  [1, 16], [2, 17], [3, 18], [4, 19], [5, 20], [6, 22], [7, 24], [8, 26], [9, 28], [10, 30], [11, 33], [12, 36],
  [13, 39], [14, 42], [15, 46], [16, 50], [17, 55], [18, 60], [19, 66], [20, 72], [21, 79], [22, 86], [23, 94],
  [24, 103], [25, 113], [26, 124], [27, 136], [28, 149], [29, 163], [30, 178], [31, 194], [32, 211], [33, 229],
  [34, 248], [35, 268], [36, 289], [37, 311], [38, 334], [39, 358], [40, 383], [41, 409], [42, 436], [43, 464],
  [44, 493], [45, 523], [46, 554], [47, 586], [48, 619], [49, 653], [50, 688], [51, 724], [52, 761], [53, 799],
  [54, 838], [55, 878], [56, 919], [57, 961], [58, 1004], [59, 1048], [60, 1093], [61, 1139], [62, 1186], [63, 1234],
  [64, 1283], [65, 1333], [66, 1384], [67, 1436], [68, 1489], [69, 1543], [70, 1598], [71, 1654], [72, 1711],
  [73, 1769], [74, 1828], [75, 1888], [76, 1949], [77, 2011], [78, 2074], [79, 2138], [80, 2203], [81, 2269],
  [82, 2336], [83, 2404], [84, 2473], [85, 2543], [86, 2614], [87, 2686], [88, 2759], [89, 2833], [90, 2908],
  [91, 2984], [92, 3061], [93, 3139], [94, 3218], [95, 3298], [96, 3379], [97, 3461], [98, 3544], [99, 3628],
  [100, 3713], [101, 3799], [102, 3886], [103, 3974], [104, 4063], [105, 4153], [106, 4244], [107, 4336], [108, 4429],
  [109, 4523], [110, 4618], [111, 4714], [112, 4811], [113, 4909], [114, 5008], [115, 5108], [116, 5209], [117, 5311],
  [118, 5414], [119, 5518], [120, 5623], [121, 5729], [122, 5836], [123, 5944], [124, 6053], [125, 6163], [126, 6274],
  [127, 6386], [128, 6499], [129, 6613], [130, 6728], [131, 6844], [132, 6961], [133, 7079], [134, 7198], [135, 7318],
  [136, 7439], [137, 7561], [138, 7684], [139, 7808], [140, 7933], [141, 8059], [142, 8186], [143, 8314], [144, 8443],
  [145, 8573], [146, 8704], [147, 8836], [148, 8969], [149, 9103], [150, 9238], [151, 9374], [152, 9511], [153, 9649],
  [154, 9788], [155, 9928], [156, 10069], [157, 10211], [158, 10354], [159, 10498], [160, 10643], [161, 10789],
  [162, 10936], [163, 11084], [164, 11233], [165, 11383], [166, 11534], [167, 11686], [168, 11839], [169, 11993],
  [170, 12148], [171, 12304], [172, 12461], [173, 12619], [174, 12778], [175, 12938], [176, 13099], [177, 13261],
  [178, 13424], [179, 13588], [180, 13753], [181, 13919], [182, 14086], [183, 14254], [184, 14423], [185, 14593],
  [186, 14764], [187, 14936], [188, 15109], [189, 15283], [190, 15458], [191, 15634], [192, 15811], [193, 15989],
  [194, 16168], [195, 16348], [196, 16529], [197, 16711], [198, 16894], [199, 17078], [200, 17263], [201, 17449],
  [202, 17636], [203, 17824], [204, 18013], [205, 18203], [206, 18394], [207, 18586], [208, 18779], [209, 18973],
  [210, 19168], [211, 19364], [212, 19561], [213, 19759], [214, 19958], [215, 20158], [216, 20359], [217, 20561],
  [218, 20764], [219, 20968], [220, 21173], [221, 21379], [222, 21586], [223, 21794], [224, 22003], [225, 22213],
  [226, 22424], [227, 22636], [228, 22849], [229, 23063], [230, 23278], [231, 23494], [232, 23711], [233, 23929],
  [234, 24148], [235, 24368], [236, 24589], [237, 24811], [238, 25034], [239, 25258], [240, 25483], [241, 25709],
  [242, 25936], [243, 26164], [244, 26393], [245, 26623], [246, 26854], [247, 27086], [248, 27319], [249, 27553],
  [250, 27788], [251, 28024], [252, 28261], [253, 28499], [254, 28738], [255, 28978]
];